# Changelog // Night City OS

All notable changes to the "Night City OS" project will be documented in this file.

## [v5.8.0] - Labs & Extras - 2025-12-28
### Features
- **Feature Flags:** Introduced a local-first flag system to toggle experimental features via `Settings` -> `Labs` (OFF by default).
- **Wallpaper Engine:** Particle-based live background engine with EMA performance guardrails (auto-disables on lag, Reduced Motion, or Battery Saver).
- **Hardened Plugin System:** Support for secure, dynamic app registration from local manifests via `registerPlugin`, restricted by an **ID Allowlist**.
- **Multi-Monitor Sim:** Experimental "Simulated Multi-Display" mode that adjusts desktop scaling and ring indicators.
- **Crypto Utilities:** Added SHA-256 hashing for **checksum-based corruption detection** in system backups.
- **Linux VM Stub:** Placeholder for x86 virtualization runtime.
- **NetRelay Stub:** Placeholder for P2P collaboration layer.

### Architecture
- **Registry Hardening:** Decoupled system apps from plugin apps; added registration auth checks.
- **Security Utilities:** Implemented recursion depth limits (10) and max string length caps (100KB) for backup import validation (Bomb Protection).
- **Observability:** Added EMA-based performance monitoring to high-compute components.

### Fixed
- **AppSwitcher:** Wrapped in `FocusTrap` and added ARIA roles for keyboard navigation.
- **Shell:** Blocked all global shortcuts (Command Palette, Switcher) during session lock.
- **Diagnostics:** Implemented `sanitizeDiagnosticData` to redact PII and secrets from issue reports.
- **Tests:** Consolidated registry and plugin tests into `registry.test.js`. Added coverage for security bomb protection.

## [v5.7.0] - Quality Gates & Accessibility - 2025-12-28
### Accessibility
- **Global Font Scaling:** Added setting to scale system text from 80% to 150%.
- **Focus Management:** Implemented `FocusTrap` utility.
- **Keyboard Navigation:** Added Arrow Key navigation and Alt+W shortcuts.
- **Adaptive UI:** High Contrast and Reduced Motion support.

### Quality & Observability
- **Error Reporting:** Global capture for console errors and unhandled rejections.
- **Logs App:** New application to view Audit Logs and Console output.
- **Diagnostic Export:** "Report Issue" bundle generation.

## [v5.6.0] - Security & Hardening - 2025-12-27
- **Audit Logging:** Permanent security event recording.
- **Profile Isolation:** Multi-user profile support with isolated storage.
- **Lock Screen:** Session locking mechanism.
- **Terminal 2.0:** Real filesystem commands.

# Changelog // Night City OS

All notable changes to the "Night City OS" project will be documented in this file.

## [v5.8.1] - Hardened & Polished - 2025-12-28
### Security & Performance
- **JSON Bomb Protection:** Added recursion depth (10) and string length (100KB) limits to `validateImport`.
- **Plugin Allowlist:** Restricted `registerPlugin` to an explicit `PLUGIN_ALLOWLIST`.
- **EMA Performance Monitoring:** Implemented 60-frame moving average FPS tracking for `WallpaperEngine` (auto-disables < 30FPS).
- **Sanitized Diagnostics:** Added recursive redaction for sensitive keys in issue reports.

### UI/UX & Inclusivity
- **Adaptive Context Menus:** Refactored `ContextMenu` to be generic and target-aware; added specific actions for Files, Folders, and Desktop.
- **AppSwitcher Polish:** Added `FocusTrap`, Arrow Key navigation, and ARIA listbox roles.
- **Snap Layouts:** Implemented hover-triggered picker on window maximize buttons.
- **DND Feedback:** Added visual hover states and `FolderOpen` icons for drag-over events in File Explorer.
- **Haptic & Audio:** Added `snap` sound effect and `navigator.vibrate` feedback for window actions.

### Fixed
- **Shortcut Gating:** Blocked all global shortcuts (Cmd+K, Alt+Tab) during session lock.
- **Test Integrity:** Resolved component test regressions in `Taskbar.test.jsx` and `WindowFrame.test.jsx`.
- **Registry:** Fixed missing `Globe` icon and incorrect `useOS` import paths.

## [v5.8.0] - Labs & Extras - 2025-12-28
- **Feature Flags:** Toggles for experimental features in Settings.
- **Wallpaper Engine:** Particle background system.
- **Crypto Engine:** SHA-256 integrity hashing.

## [v5.7.0] - Quality Gates & Accessibility - 2025-12-28
- **Global Font Scaling:** System-wide text scaling setting.
- **Focus Management:** `FocusTrap` utility.
- **Error Reporting:** Global console capture pipeline.
- **Logs App:** System event viewer.